name: Expressions and Contexts
on: [push, pull_request, issues]

jobs:
  runs-on-issues-and-prs:
    runs-on: ubuntu-latest
    if: github.event_name == 'issues' || github.event_name == 'pull_request'
    steps:
      - name: Run only if issue or PR has a bug label
        if: (github.event_name == 'issues' && contains(github.event.issue.labels.*.name, 'bug')) || 
            (github.event_name == 'pull_request' && contains(github.event.pull_request.labels.*.name, 'bug'))
        run: |
          if [[ "${{ github.event_name }}" == "issues" ]]; then
            echo "Issue labels: ${{ join(github.event.issue.labels.*.name, ', ') }}"
          else
            echo "PR labels: ${{ join(github.event.pull_request.labels.*.name, ', ') }}"
          fi

  using-expressions-and-events:
    runs-on: ubuntu-latest
    steps:
      - name: Expressions
        run: |
          echo ${{ 1 }}
          echo ${{ 'This is a string' }}
          echo ${{ true }}
          echo ${{ false }}
          echo ${{ null }}
          echo ${{ 1 > 2 }}
          echo ${{ 'string' == 'String' }}
          echo ${{ 1 && 0 }}
          echo ${{ true || (false && true) }}
      - name: Dump Contexts
        run: |
          echo '${{ toJson(github) }}'
          echo '${{ toJson(job) }}'
          echo '${{ toJson(steps) }}'
          echo '${{ toJson(runner) }}'
          echo '${{ toJson(secrets) }}'